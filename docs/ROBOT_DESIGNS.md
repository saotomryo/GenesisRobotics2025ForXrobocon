# XROBOCON ロボット設計カタログ

## 概要

XROBOCON競技シミュレーターでは、複数の異なるロボット設計を実装し、それぞれの特性を比較できるようにします。

---

## 実装済みロボット

### 1. 標準ホイール型（Standard Wheel）

**ファイル**: `xrobocon/assets/robot.xml`

**仕様:**
- ベース半径: 0.1m
- ホイール半径: 0.025m
- 駆動方式: 差動駆動（2輪）
- 総重量: 約3.5kg

**特徴:**
- ✅ 平地移動に最適
- ✅ 制御が簡単
- ❌ 段差登坂能力: 最大1.25cm（ホイール半径の50%）

**訓練状況:**
- Phase 3-1: 平地移動 - **100%成功率達成**
- モデル: `xrobocon_ppo.zip`

---

## 実装中ロボット

### 2. 星型ホイール型（Tri-star Wheel）

**ファイル**: `xrobocon/assets/robot_tristar.xml`

**仕様:**
- ベースサイズ: 0.16m × 0.12m × 0.04m
- ホイール半径: 0.03m（各Tri-starに3個）
- 駆動方式: 左右Tri-star独立駆動
- 総重量: 約3.8kg

**動作原理:**
```
平地走行:
  ┌─┐
  │ │  ← 上のホイール（非接地）
  └─┘
 ●   ●  ← 下の2つのホイール（接地）
          各ホイールにモーターがあり、独立して回転可能（スムーズな走行）

段差登坂:
    ┌─┐
   ●│ │  ← 上のホイールが段差に乗る
    └─┘
     ● ●  ← フレーム全体を回転させる強力なモーターで持ち上げる
```

**特徴:**
- ✅ 段差登坂能力: 最大10cm（Tier 1）
- ✅ 平地走行: 全輪駆動によりスムーズ
- ✅ 制御: 車輪駆動（移動）とフレーム回転（登坂）のハイブリッド制御
- ⚠️ 制御が少し複雑（8モーター制御）

**実装難易度**: ⭐⭐⭐ (中)

**訓練計画:**
- Phase 3-2a: 平地移動訓練（進行中）
- Phase 3-2b: 段差登坂訓練
- 目標: Tier 1（10cm）への登坂

---

## 将来実装予定ロボット

### 3. クローラ + サブクローラ型（Crawler with Flippers）

**ファイル**: `xrobocon/assets/robot_crawler.xml`（未実装）

**仕様（予定）:**
- メインクローラ: 長さ0.2m × 幅0.08m
- サブクローラ（フリッパー）: 前後2基
- 駆動方式: メイン2系統 + フリッパー2系統 = 計4モーター
- 総重量: 約5.0kg（予想）

**動作原理:**
```
平地走行:
  ┌────┐
  │    │  ← メインクローラ
  └────┘

段差登坂:
    ╱┌────┐
   ╱ │    │  ← フリッパーを持ち上げて段差に引っかける
  ╱  └────┘
```

**特徴:**
- ✅ 段差登坂能力: 最大15cm以上（フリッパー長による）
- ✅ 非常に安定（接地面積が広い）
- ✅ 実用性が高い（災害救助ロボットで実績）
- ❌ 制御が複雑（4モーター + フリッパー角度制御）
- ❌ 重量が重い

**実装難易度**: ⭐⭐⭐⭐⭐ (高)

**実装優先度**: 中（Tri-starで成功後）

---

### 4. リムレスホイール型（Rimless Wheel）

**ファイル**: `xrobocon/assets/robot_rimless.xml`（未実装）

**仕様（予定）:**
- ホイール直径: 0.08m
- スポーク数: 6本
- 駆動方式: 差動駆動（2輪）
- 総重量: 約2.5kg（軽量）

**動作原理:**
```
平地走行:
  ＊  ← スポークが順番に接地
 / | \
   |

段差登坂:
    ＊  ← スポークが段差に引っかかる
   /|
  / |
```

**特徴:**
- ✅ 段差登坂能力: 最大4cm（スポーク長による）
- ✅ 非常に軽量
- ✅ 実装がシンプル
- ✅ 泥や砂地に強い
- ❌ 平地走行時の振動が大きい
- ❌ カメラ搭載には不向き

**実装難易度**: ⭐⭐ (低)

**実装優先度**: 低（研究用）

---

## ロボット選択基準

| 項目 | 標準ホイール | Tri-star | クローラ | リムレス |
|------|------------|----------|---------|---------|
| 平地速度 | ⭐⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐ | ⭐⭐⭐ |
| 段差登坂 | ⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐⭐ |
| 安定性 | ⭐⭐⭐⭐ | ⭐⭐⭐⭐ | ⭐⭐⭐⭐⭐ | ⭐⭐ |
| 制御難易度 | 低 | 低 | 高 | 低 |
| 実装難易度 | 低 | 中 | 高 | 低 |
| 実用性 | 高 | 高 | 非常に高 | 低 |

---

## 実装ロードマップ

### Phase 1: 基本移動（完了）
- ✅ 標準ホイール型で平地移動100%達成

### Phase 2: 段差登坂（進行中）
- 🔄 Tri-star型で段差登坂訓練
- 目標: Tier 1（10cm）登坂

### Phase 3: 高度な登坂（将来）
- ⏳ クローラ + サブクローラ型の実装
- 目標: Tier 2（35cm）登坂

### Phase 4: 競技シミュレーター（最終目標）
- ⏳ 複数ロボット間の性能比較
- ⏳ ロボット選択UI
- ⏳ 競技ルールに基づく評価

---

## 使用方法（将来）

```bash
# 標準ホイール型で実行
python run_xrobocon.py --robot standard

# Tri-star型で実行
python run_xrobocon.py --robot tristar

# クローラ型で実行
python run_xrobocon.py --robot crawler

# リムレス型で実行
python run_xrobocon.py --robot rimless
```

---

## 参考資料

### Tri-star Wheel
- 階段昇降用台車の実例
- NASA Mars Rover の一部機構

### Crawler with Flippers
- iRobot PackBot（軍事・災害救助）
- Quince（福島第一原発調査ロボット）

### Rimless Wheel
- 研究用ロボット（McGeer's Passive Walker）
- 省エネルギー歩行の研究

---

## 認識システム (Perception System)

シミュレーション上の「地形認識 (Terrain Perception)」は、実世界では以下のセンサーシステムに相当します。

### 1. 深度カメラ (Depth Camera)
- **推奨デバイス**: Intel RealSense D435i, Stereolabs ZED 2i
- **仕組み**: ステレオカメラまたは赤外線パターン投影により、ピクセルごとの距離（深度）を取得。これを点群データ（Point Cloud）に変換し、ロボット座標系でのローカル高さマップ（Local Elevation Map）を生成します。
- **メリット**: 情報量が豊富、比較的安価。
- **デメリット**: 直射日光や透明な物体に弱い。

### 2. 2D LiDAR (Tilted)
- **推奨デバイス**: RPLIDAR A1/A2/A3 (斜め取り付け)
- **仕組み**: レーザー距離計を回転させ、平面上の障害物を検知。斜め下に取り付けることで、前方の路面形状（段差の有無）をスキャンします。
- **メリット**: 照明条件に左右されない、高精度。
- **デメリット**: 3次元形状の認識には工夫が必要（スキャンラインのみ）。

### 3. 3D LiDAR
- **推奨デバイス**: Velodyne Puck, Ouster OS0
- **仕組み**: 全方位の3次元点群を取得。
- **メリット**: 圧倒的な情報量と精度。
- **デメリット**: 非常に高価、データ処理負荷が高い。

**XROBOCONでの実装:**
シミュレーターでは、計算負荷を抑えるため、これらのセンサー処理の結果として得られる「ローカル高さマップ (5x5グリッド)」を直接生成してエージェントに入力しています。
