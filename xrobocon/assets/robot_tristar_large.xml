<?xml version="1.0"?>
<mujoco model="tristar_large_robot">
  <compiler angle="degree" coordinate="local" inertiafromgeom="true"/>
  <option timestep="0.002" gravity="0 0 -9.81"/>

  <default>
    <joint armature="0.015" damping="0.15"/>
    <geom friction="1.0" solimp="0.9 0.95 0.001 0.5 2" solref="0.02 1"/>
    <motor ctrllimited="true" ctrlrange="-1.0 1.0"/>
  </default>

  <worldbody>
    <!-- Main Body (Base) - 1.5倍に拡大 -->
    <body name="base_link" pos="0 0 0.12">
      <freejoint/>
      <geom type="box" size="0.12 0.09 0.03" rgba="0.2 0.2 0.8 1" mass="5.0"/>
      
      <!-- Visual Marker for Front -->
      <geom type="box" pos="0.09 0 0.03" size="0.03 0.03 0.03" rgba="1 0 0 1" mass="0.1"/>

      <!-- Left Tri-star Wheel Assembly -->
      <body name="left_tristar" pos="0 0.21 0" euler="0 0 0">
        <!-- Tri-star frame (triangle) -->
        <geom type="cylinder" size="0.015 0.015" rgba="0.3 0.3 0.3 1" mass="1.5" zaxis="0 1 0"/>
        <joint name="left_tristar_joint" type="hinge" axis="0 1 0" damping="15.0" armature="0.015"/>
        
        <!-- Wheel 1 (bottom-front) - フレーム半径0.15mを実現 -->
        <body name="left_wheel_1" pos="0.12 0 -0.09" zaxis="0 1 0">
          <joint name="left_wheel_1_joint" type="hinge" axis="0 0 1" damping="1.0" armature="0.008"/>
          <geom type="cylinder" size="0.09 0.03" rgba="0.1 0.1 0.1 1" mass="1.0" friction="2.0 0.005 0.0001"/>
        </body>
        
        <!-- Wheel 2 (bottom-back) -->
        <body name="left_wheel_2" pos="-0.12 0 -0.09" zaxis="0 1 0">
          <joint name="left_wheel_2_joint" type="hinge" axis="0 0 1" damping="1.0" armature="0.008"/>
          <geom type="cylinder" size="0.09 0.03" rgba="0.1 0.1 0.1 1" mass="0.7" friction="2.0 0.005 0.0001"/>
        </body>
        
        <!-- Wheel 3 (top) -->
        <body name="left_wheel_3" pos="0 0 0.15" zaxis="0 1 0">
          <joint name="left_wheel_3_joint" type="hinge" axis="0 0 1" damping="1.0" armature="0.008"/>
          <geom type="cylinder" size="0.09 0.03" rgba="0.1 0.1 0.1 1" mass="0.7" friction="2.0 0.005 0.0001"/>
        </body>
      </body>

      <!-- Right Tri-star Wheel Assembly (mirror) -->
      <body name="right_tristar" pos="0 -0.21 0" euler="0 0 0">
        <geom type="cylinder" size="0.015 0.015" rgba="0.3 0.3 0.3 1" mass="1.5" zaxis="0 1 0"/>
        <joint name="right_tristar_joint" type="hinge" axis="0 1 0" damping="15.0" armature="0.015"/>
        
        <body name="right_wheel_1" pos="0.12 0 -0.09" zaxis="0 1 0">
          <joint name="right_wheel_1_joint" type="hinge" axis="0 0 1" damping="1.0" armature="0.008"/>
          <geom type="cylinder" size="0.09 0.03" rgba="0.1 0.1 0.1 1" mass="0.7" friction="2.0 0.005 0.0001"/>
        </body>
        
        <body name="right_wheel_2" pos="-0.12 0 -0.09" zaxis="0 1 0">
          <joint name="right_wheel_2_joint" type="hinge" axis="0 0 1" damping="1.0" armature="0.008"/>
          <geom type="cylinder" size="0.09 0.03" rgba="0.1 0.1 0.1 1" mass="0.7" friction="2.0 0.005 0.0001"/>
        </body>
        
        <body name="right_wheel_3" pos="0 0 0.15" zaxis="0 1 0">
          <joint name="right_wheel_3_joint" type="hinge" axis="0 0 1" damping="1.0" armature="0.008"/>
          <geom type="cylinder" size="0.09 0.03" rgba="0.1 0.1 0.1 1" mass="0.7" friction="2.0 0.005 0.0001"/>
        </body>
      </body>
    </body>
  </worldbody>

  <actuator>
    <!-- Frame motors (High torque for climbing) - 大型化に伴いギア比増加 -->
    <motor name="left_frame_motor" joint="left_tristar_joint" gear="150"/>
    <motor name="right_frame_motor" joint="right_tristar_joint" gear="150"/>
    
    <!-- Wheel motors (Speed for driving) -->
    <motor name="left_wheel_1_motor" joint="left_wheel_1_joint" gear="75"/>
    <motor name="left_wheel_2_motor" joint="left_wheel_2_joint" gear="75"/>
    <motor name="left_wheel_3_motor" joint="left_wheel_3_joint" gear="75"/>
    
    <motor name="right_wheel_1_motor" joint="right_wheel_1_joint" gear="75"/>
    <motor name="right_wheel_2_motor" joint="right_wheel_2_joint" gear="75"/>
    <motor name="right_wheel_3_motor" joint="right_wheel_3_joint" gear="75"/>
  </actuator>
</mujoco>
